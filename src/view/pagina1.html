<!doctype html>
<html ⚡>
<head>
  <meta charset="utf-8">
  <title>Test AMP RTC Configuration</title>
  <link rel="canonical" href="https://example.com">
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <style amp-custom>
    /* Adicione aqui estilos personalizados */
  </style>
</head>
<body>

  <!-- Elemento AMP Ad com configuração de RTC -->
  <amp-ad width="300" height="250"
          type="doubleclick"
          data-slot="/21692678505/ros_canalrural"
          rtc-config='{
            "vendors": {
              "gpt": {
                "page_path": "${canonicalPath}",
                "category": "${pathSegment(2)}"
              }
            },
            "timeoutMillis": 750
          }'>
    <script type="application/json">
      {
        "targeting": {
          "page_path": "${canonicalPath}",
          "category": "${pathSegment(2)}"
        }
      }
    </script>
  </amp-ad>

  <!-- Script para verificar configuração do RTC -->
  <script>
    function checkRTC() {
      var ampAds = document.querySelectorAll('amp-ad');
      
      if (ampAds.length > 0) {
        ampAds.forEach(function(ampAd, index) {
          console.log(`Checking AMP Ad ${index + 1}`);
          console.log('RTC Config:', ampAd.getAttribute('rtc-config'));

          // Adicionando uma verificação básica dos valores do targeting
          var targeting = ampAd.querySelector('script[type="application/json"]');
          if (targeting) {
            console.log('Targeting Config:', JSON.parse(targeting.textContent));
          } else {
            console.log('Targeting script not found.');
          }
        });
      } else {
        console.log('No AMP Ad elements found.');
      }
    }

    // Executa a função para verificar a configuração do RTC
    document.addEventListener('DOMContentLoaded', function() {
      checkRTC();
    });
  </script>

</body>
</html>
